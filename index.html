<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VR Σκηνή με GLB</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-aabb-collider-component@3.2.0/dist/aframe-aabb-collider-component.min.js"></script>
<style>body{margin:0;}</style>
</head>
<body>
<a-scene vr-mode-ui="enabled: true" embedded>
  <a-sky color="#87CEEB"></a-sky>
  <a-plane rotation="-90 0 0" width="80" height="80" color="#2e8b57"></a-plane>
  <a-entity id="player" position="0 1.6 3" wasd-controls look-controls>
    <a-entity camera></a-entity>
  </a-entity>
  <a-entity light="type: ambient; intensity: 0.6"></a-entity>
  <a-entity light="type: directional; intensity: 0.8" position="0 10 5"></a-entity>
</a-scene>

<script>
const baseURL = "https://pda21087.github.io/";
const treeFiles = ["low_poly_tree_scene_free/linden_tree.glb"];
const butterflyFiles = ["animated_butterfly/animated_butterfly.glb"];
const scene = document.querySelector('a-scene');

function randomPosition(minX, maxX, minY, maxY, minZ, maxZ){
  return { x: Math.random()*(maxX-minX)+minX, y: Math.random()*(maxY-minY)+minY, z: Math.random()*(maxZ-minZ)+minZ };
}

for(let i=0;i<10;i++){
  const tree = document.createElement('a-entity');
  const pos = randomPosition(-15,15,0,0,-20,0);
  tree.setAttribute('gltf-model', baseURL + treeFiles[0]);
  tree.setAttribute('scale', `${1+Math.random()} ${1+Math.random()} ${1+Math.random()}`);
  tree.setAttribute('position', `${pos.x} ${pos.y} ${pos.z}`);
  scene.appendChild(tree);
}

for(let i=0;i<10;i++){
  const b = document.createElement('a-entity');
  const pos = randomPosition(-8,8,1,3,-15,-5);
  b.setAttribute('gltf-model', baseURL + butterflyFiles[0]);
  b.setAttribute('scale', '0.5 0.5 0.5');
  b.setAttribute('position', `${pos.x} ${pos.y} ${pos.z}`);
  b.setAttribute('animation-mixer', '');
  b.classList.add('butterfly');
  scene.appendChild(b);
}

const net = document.createElement('a-entity');
net.setAttribute('geometry', 'primitive: cylinder; radius:0.16; height:1.1');
net.setAttribute('material', 'color: #f0f0f0; opacity:0.9');
net.setAttribute('position', '0 -0.15 -0.8');
net.setAttribute('rotation', '-20 0 0');
net.setAttribute('aabb-collider', 'objects: .butterfly');
scene.querySelector('#player').appendChild(net);
</script>
</body>
</html>
